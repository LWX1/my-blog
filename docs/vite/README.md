---
title: vite
date: 2022-03-01
isShowComments: false
tags:
    - vite
categories:
    - vite
---

## 为啥选择 vite

-   在前端的世界里，已经有 webpack 这个很成熟的构建工具了，为啥我们还需要使用 vite 呢？
-   随着时代发展，应用也随之越来越大，需要处理的代码也是指数级增长，包含几千个模块的项目相当普遍；我们开始有了瓶颈——webpack 构建工具通常有点久，甚至几分钟才能启动服务，及时使用了<font style="color: orange"> HMR(模块热更新) </font>,极大的影响了开发效率。
-   vite 利用浏览器开始支持 es 模块，使用编译型语言编写。

### 缓慢的服务器启动

-   vite 将应用的模块分为依赖和源码

-   依赖：开发不会变的纯 js，vite 使用 esbuild 预构建依赖，esbuild 使用 go 编写，相比于 js 构建快 10-1000 倍。

-   源码：vite 在浏览器请求源码时进行转换并按需引入，动态加载源码，减少了代码解析。

### 缓慢的更新

-   vite 中，HMR 在原生的 ESM 上执行；当文件更新，vite 只需精确的使已编辑的模块与其最近的 HMR 边界之间的链失活，无论应用多大，都只更新附近的一块区域。
